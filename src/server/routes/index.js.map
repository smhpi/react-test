{"version":3,"sources":["routes/index.js"],"names":["express","require","router","Router","generateToken","sendToken","passport","config","request","route","post","authenticate","session","req","res","next","user","send","auth","id","module","exports"],"mappings":";;AAAA,IAAIA,UAAUC,QAAQ,SAAR,CAAd;AACA,IAAIC,SAASF,QAAQG,MAAR,EAAb;;eACmCF,QAAQ,sBAAR,C;IAA7BG,a,YAAAA,a;IAAeC,S,YAAAA,S;;AACrB,IAAIC,WAAWL,QAAQ,UAAR,CAAf;AACA,IAAIM,SAASN,QAAQ,WAAR,CAAb;AACA,IAAIO,UAAUP,QAAQ,SAAR,CAAd;AACAA,QAAQ,aAAR;;AAEAC,OAAOO,KAAP,CAAa,gBAAb,EACKC,IADL,CACUJ,SAASK,YAAT,CAAsB,gBAAtB,EAAwC,EAACC,SAAS,KAAV,EAAxC,CADV,EACqE,UAASC,GAAT,EAAcC,GAAd,EAAmBC,IAAnB,EAAyB;AACtF,QAAI,CAACF,IAAIG,IAAT,EAAe;AACX,eAAOF,IAAIG,IAAJ,CAAS,GAAT,EAAc,wBAAd,CAAP;AACH;AACDJ,QAAIK,IAAJ,GAAW;AACPC,YAAIN,IAAIG,IAAJ,CAASG;AADN,KAAX;;AAIAJ;AACH,CAVL,EAUOX,aAVP,EAUsBC,SAVtB;;AAYAH,OAAOO,KAAP,CAAa,cAAb,EACKC,IADL,CACUJ,SAASK,YAAT,CAAsB,cAAtB,EAAsC,EAACC,SAAS,KAAV,EAAtC,CADV,EACmE,UAASC,GAAT,EAAcC,GAAd,EAAmBC,IAAnB,EAAyB;AACpF,QAAI,CAACF,IAAIG,IAAT,EAAe;AACX,eAAOF,IAAIG,IAAJ,CAAS,GAAT,EAAc,wBAAd,CAAP;AACH;AACDJ,QAAIK,IAAJ,GAAW;AACPC,YAAIN,IAAIG,IAAJ,CAASG;AADN,KAAX;;AAIAJ;AACH,CAVL,EAUOX,aAVP,EAUsBC,SAVtB;;AAYAe,OAAOC,OAAP,GAAiBnB,MAAjB","file":"index.js","sourcesContent":["var express = require('express');\r\nvar router = express.Router();\r\nvar { generateToken, sendToken } = require('../utils/token.utils');\r\nvar passport = require('passport');\r\nvar config = require('../config');\r\nvar request = require('request');\r\nrequire('../passport')();\r\n\r\nrouter.route('/auth/facebook')\r\n    .post(passport.authenticate('facebook-token', {session: false}), function(req, res, next) {\r\n        if (!req.user) {\r\n            return res.send(401, 'User Not Authenticated');\r\n        }\r\n        req.auth = {\r\n            id: req.user.id\r\n        };\r\n\r\n        next();\r\n    }, generateToken, sendToken);\r\n\r\nrouter.route('/auth/google')\r\n    .post(passport.authenticate('google-token', {session: false}), function(req, res, next) {\r\n        if (!req.user) {\r\n            return res.send(401, 'User Not Authenticated');\r\n        }\r\n        req.auth = {\r\n            id: req.user.id\r\n        };\r\n\r\n        next();\r\n    }, generateToken, sendToken);\r\n\r\nmodule.exports = router;"]}